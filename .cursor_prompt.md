# Cursor Agent Implementation Guidelines

## GitKraken MCP Authentication Handling

When using GitKraken MCP tools for remote repository access:

### Authentication Required
If authentication is required to access remote repo files, always prompt the user with:
> "Please authenticate with GitKraken to continue fetching remote files."

### Fallback Strategy
If authentication is not available, fall back to local workspace context using:
- `git pull origin main` to sync local changes
- Cursor's local file cache for file content
- Local git commands for repository status

### Why This Matters
This prevents the agent from hanging indefinitely during debugging runs when remote repository access is blocked by authentication requirements.

## AI SDK Implementation Guidelines

For AI SDK v5 compatibility and deployment, refer to:
- `/docs/AI_SDK_MODEL_GUIDELINES.md` - Canonical usage rules and patterns
- Always use `customModelProvider.getModel()` for LanguageModel instances
- Use proper streaming response methods (`.toTextStreamResponse()`, `.toUIMessageStreamResponse()`)
- Follow canonical Vercel patterns for deployment compatibility

## General Development Principles

- Preserve runtime behavior exactly
- Add inline comments for significant changes
- Use `@/` aliases for imports
- No renaming of exported functions or constants
- Validate changes with `pnpm build` before committing
